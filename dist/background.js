console.log("Video Overlay: Background script loaded");chrome.commands.onCommand.addListener(o=>{console.log("Command received:",o),o==="toggle-overlay"&&chrome.tabs.query({active:!0,currentWindow:!0},e=>{console.log("Active tab:",e[0]),e[0]&&chrome.tabs.sendMessage(e[0].id,{type:"ping"},t=>{chrome.runtime.lastError?(console.log("Content script not loaded yet, injecting content script..."),chrome.scripting.executeScript({target:{tabId:e[0].id},files:["content.js"]}).then(()=>{console.log("Content script injected, sending message..."),setTimeout(()=>{chrome.tabs.sendMessage(e[0].id,{type:"fetchMessage"})},100)}).catch(s=>{console.error("Error injecting content script:",s)})):(console.log("Content script is loaded, requesting message"),chrome.tabs.sendMessage(e[0].id,{type:"fetchMessage"}))})})});chrome.runtime.onMessage.addListener((o,e,t)=>(console.log("Background script received message:",o),o.type==="OVERLAY_TOGGLE"&&(console.log("Overlay toggle requested"),t({success:!0})),!0));
